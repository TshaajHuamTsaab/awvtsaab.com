<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>ç»ç’ƒé¥æ§é˜…è¯»å™¨</title>
<style>
  body {
    font-family: "Segoe UI", Arial, sans-serif;
    background: #fdf6e3;
    margin: 0;
    padding: 0;
    color: #333;
    transition: background 0.3s;
  }

  #book {
    padding: 20px;
    font-size: 18px;
    line-height: 1.6;
    max-width: 800px;
    margin: 0 auto 200px auto; /* ç»™ä¸‹é¢é¥æ§å™¨ç•™ç©ºé—´ */
  }

  /* åœ†ç›˜æ§åˆ¶å™¨å®¹å™¨ */
  #controller {
    position: fixed;
    bottom: 30px;
    left: 50%;
    transform: translateX(-50%);
    width: 300px;
    height: 300px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.15);
    backdrop-filter: blur(12px);
    border: 2px solid rgba(255, 255, 255, 0.4);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    transition: opacity 0.3s, transform 0.3s;
  }

  /* éšè—æ—¶ */
  #controller.hidden {
    opacity: 0;
    pointer-events: none;
    transform: translateX(-50%) scale(0.8);
  }

  /* ä¸­å¿ƒæŒ‰é’® */
  #controller .center-btn {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    border: none;
    font-size: 20px;
    background: #ffd93d;
    color: #000;
    cursor: pointer;
    box-shadow: 0 0 12px rgba(0,0,0,0.3);
  }

  /* æ–¹å‘æŒ‰é’®ä½ç½® */
  .btn {
    position: absolute;
    border-radius: 50%;
    border: none;
    padding: 12px;
    font-size: 16px;
    cursor: pointer;
    background: rgba(255,255,255,0.6);
    backdrop-filter: blur(6px);
    box-shadow: 0 0 6px rgba(0,0,0,0.3);
  }

  .btn:hover {
    transform: scale(1.1);
  }

  /* ä¸Šä¸‹å·¦å³ */
  .top { top: 20px; left: 50%; transform: translateX(-50%); }
  .bottom { bottom: 20px; left: 50%; transform: translateX(-50%); }
  .left { left: 20px; top: 50%; transform: translateY(-50%); }
  .right { right: 20px; top: 50%; transform: translateY(-50%); }

  /* å››è§’ */
  .top-left { top: 40px; left: 40px; }
  .top-right { top: 40px; right: 40px; }
  .bottom-left { bottom: 40px; left: 40px; }
  .bottom-right { bottom: 40px; right: 40px; }

  /* éšè—æŒ‰é’® */
  #toggle-btn {
    position: absolute;
    top: -10px;
    right: -10px;
    border: none;
    border-radius: 50%;
    padding: 6px;
    font-size: 14px;
    background: rgba(0,0,0,0.5);
    color: #fff;
    cursor: pointer;
  }
</style>
</head>
<body>

<div id="book">
  <h2>ç¤ºä¾‹ç« èŠ‚</h2>
  <p>è¿™æ˜¯ä¸€æœ¬æµ‹è¯•ä¹¦ç±çš„ç¬¬ä¸€æ®µæ–‡å­—ã€‚</p>
  <p>è¿™é‡Œæœ‰ç¬¬äºŒæ®µï¼Œå¸¦æ›´å¤šçš„è¯´æ˜ã€‚</p>
  <p>ç¬¬ä¸‰æ®µï¼šå¯ä»¥æµ‹è¯•æŒ‰é’®åŠŸèƒ½æ˜¯å¦æ­£å¸¸ã€‚</p>
</div>

<!-- éŸ³é¢‘ -->
<audio id="chapter-audio" src="books/book3/audio/cover.mp3"></audio>

<!-- é¥æ§å™¨ -->
<div id="controller">
  <button id="toggle-btn">âœ–</button>
  <button class="center-btn" onclick="toggleAudio()">â–¶ï¸/â¸</button>
  <button class="btn top" onclick="prevChapter()">â¬†</button>
  <button class="btn bottom" onclick="nextChapter()">â¬‡</button>
  <button class="btn left" onclick="changeTextSize(-2)">ğŸ”-</button>
  <button class="btn right" onclick="changeTextSize(2)">ğŸ”+</button>
  <button class="btn top-left" onclick="cycleSpeed()">â©</button>
  <button class="btn top-right" onclick="changeBackground()">ğŸŒˆ</button>
  <button class="btn bottom-left" onclick="goBack()">ğŸ“–</button>
  <button class="btn bottom-right" onclick="alert('â­ æ”¶è—åŠŸèƒ½å¾…å¼€å‘')">â­</button>
</div>

<script>
let audio = document.getElementById("chapter-audio");

// æ’­æ”¾/æš‚åœ
function toggleAudio() {
  if (audio.paused) audio.play();
  else audio.pause();
}

// ç« èŠ‚åˆ‡æ¢
function prevChapter() {
  alert("ä¸Šä¸€ç« åŠŸèƒ½å·²è§¦å‘ (æ›¿æ¢æˆ loadChapter)");
}
function nextChapter() {
  alert("ä¸‹ä¸€ç« åŠŸèƒ½å·²è§¦å‘ (æ›¿æ¢æˆ loadChapter)");
}

// å­—å·è°ƒæ•´
function changeTextSize(delta) {
  const bookDiv = document.getElementById("book");
  const style = window.getComputedStyle(bookDiv, null).getPropertyValue('font-size');
  const currentSize = parseFloat(style);
  bookDiv.style.fontSize = (currentSize + delta) + "px";
}

// æ’­æ”¾é€Ÿåº¦å¾ªç¯
const speeds = [0.5, 1, 1.5, 2];
let speedIndex = 1;
function cycleSpeed() {
  speedIndex = (speedIndex + 1) % speeds.length;
  audio.playbackRate = speeds[speedIndex];
  alert("æ’­æ”¾é€Ÿåº¦: " + speeds[speedIndex] + "x");
}

// èƒŒæ™¯åˆ‡æ¢
const backgrounds = ["#fdf6e3","#fff","#e0f7fa","#fce4ec","#e8f5e9"];
let bgIndex = 0;
function changeBackground() {
  bgIndex = (bgIndex + 1) % backgrounds.length;
  document.body.style.background = backgrounds[bgIndex];
}

// è¿”å›é¦–é¡µ
function goBack() {
  alert("è¿”å›é¦–é¡µ (æ›¿æ¢æˆ window.location.href='library.html')");
}

// éšè—æ§åˆ¶å™¨
document.getElementById("toggle-btn").onclick = () => {
  document.getElementById("controller").classList.toggle("hidden");
};
</script>
</body>
</html>
