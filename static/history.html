<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>é˜…è¯»è®°å½•</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
<link rel="stylesheet" href="css/library.css">
</head>
<body>

<div class="app-logo">
  <img src="https://i.postimg.cc/3x3QzSGq/cropped-favicon-180x180.png" alt="App Logo">
</div>

<h1>ğŸ“– é˜…è¯»è®°å½•</h1>
<div id="history-books" class="book-grid"></div>

<div class="bottom-nav">
  <a href="../home.html"><i class="fa-solid fa-house"></i><span>é¦–é¡µ</span></a>
  <a href="library.html"><i class="fa-solid fa-book-open"></i><span>ä¹¦åº“</span></a>
  <a href="favorites.html"><i class="fa-solid fa-bookmark"></i><span>æ”¶è—</span></a>
  <a href="profile.html"><i class="fa-solid fa-user"></i><span>æˆ‘</span></a>
</div>
<script>
function loadHistory(){
  const history = JSON.parse(localStorage.getItem("readingHistory") || "[]");
  if(history.length === 0){
    document.getElementById("history-books").innerHTML =
      "<p style='color:#00ff00; text-align:center;'>æš‚æ— é˜…è¯»è®°å½•</p>";
    return;
  }

  // æœ€è¿‘é˜…è¯»æ’å‰
  history.sort((a,b)=>b.lastAccess - a.lastAccess);

  const container = document.getElementById("history-books");
  container.innerHTML = "";
  history.forEach(h=>{
    const card = document.createElement("div");
    card.className="book-card";

    const info = document.createElement("div");
    info.className="book-info";

    const title = document.createElement("h3"); 
    title.textContent = h.title;

    const seconds = Math.floor(h.timeSpent / 1000);
    const minutes = Math.floor(seconds / 60);
    const hours = Math.floor(minutes / 60);
    const remMinutes = minutes % 60;
    const remSeconds = seconds % 60;
    const timeText = `${hours}å°æ—¶ ${remMinutes}åˆ† ${remSeconds}ç§’`;

    const timeP = document.createElement("p"); 
    timeP.textContent = `é˜…è¯»æ—¶é—´ï¼š${timeText}`;

    info.appendChild(title);
    info.appendChild(timeP);
    card.appendChild(info);
    container.appendChild(card);
  });
}

loadHistory();
</script>
</body>
</html>
