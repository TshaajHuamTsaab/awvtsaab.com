<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üìö Awv's Êô∫ÊÖß‰π¶Â∫ì</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* ===== üé• Background video ===== */
    #bg-video {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      z-index: -2;
      opacity: 0.95;
      filter: blur(0px) brightness(1) contrast(1.1);
      transform: scaleX(-1);
    }

    /* ===== üå´ Overlay ===== */
    body::before {
      content: "";
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.2);
      z-index: -1;
    }

    body {
      margin: 0;
      font-family: "Poppins", "Noto Sans SC", sans-serif;
      color: white;
      padding-bottom: 60px;
      overflow-x: hidden;
      min-height: 100vh;
      background: transparent;
    }

    /* ===== ü™û Header ===== */
    header {
      text-align: center;
      padding: 25px 10px;
      background: rgba(0, 0, 0, 0.6);
      border-bottom: 1px solid rgba(255, 255, 255, 0.2);
      position: relative;
      z-index: 1;
    }

    header h1 {
      margin: 0;
      font-size: 1.8rem;
      background: linear-gradient(to right, #b58cff, #7cfaff, #f9f871);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      font-weight: 600;
      letter-spacing: 1px;
      text-shadow: 0 2px 10px rgba(0,0,0,0.5);
    }

    /* ===== üìö Category ===== */
    .category {
      margin: 40px 0;
      position: relative;
      z-index: 1;
    }

    .category-header {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      font-size: 1.5rem;
      color: #fff;
      margin-bottom: 10px;
      text-shadow: 0 2px 8px rgba(0,0,0,0.7);
    }

    .category-header img {
      width: 36px;
      height: 36px;
      border-radius: 8px;
      object-fit: cover;
      background: rgba(255, 255, 255, 0.1);
    }

    /* ===== üî≤ Book Grid ===== */
    .book-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
      gap: 20px;
      padding: 0 20px;
    }

    .book {
      background: rgba(0, 0, 0, 0.7);
      border-radius: 16px;
      overflow: hidden;
      transition: transform 0.2s, box-shadow 0.2s;
      cursor: pointer;
      text-decoration: none;
      color: inherit;
      border: 1px solid rgba(255, 255, 255, 0.2);
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
      position: relative;
    }

    .book:hover {
      transform: translateY(-6px);
      box-shadow: 0 0 20px rgba(125, 95, 255, 0.8);
      border-color: rgba(125, 95, 255, 0.6);
    }

    .book img {
      width: 100%;
      height: 210px;
      object-fit: cover;
      transition: transform 0.3s ease;
    }

    .book:hover img {
      transform: scale(1.05);
    }

    .book-info {
      padding: 12px;
      background: rgba(0, 0, 0, 0.8);
      border-radius: 0 0 12px 12px;
      border: none;
    }

    /* ===== üåà Animated Gradient Titles ===== */
    .book-title, .book-author {
      font-weight: bold;
      background: linear-gradient(90deg, #ff6ec4, #7873f5, #4ade80, #facc15);
      background-size: 300% 300%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: gradientAnimation 4s ease infinite;
      text-shadow: 0 1px 2px rgba(0,0,0,0.3);
    }

    .book-title {
      font-size: 1rem;
      margin-bottom: 4px;
    }

    .book-author {
      font-weight: normal;
      font-size: 0.85rem;
      animation-duration: 5s;
      opacity: 0.9;
    }

    @keyframes gradientAnimation {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    /* ===== ‚≠ê Êî∂ËóèÊåâÈíÆ ===== */
    .favorite-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      background: rgba(0, 0, 0, 0.7);
      border: none;
      border-radius: 50%;
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      color: #fff;
      font-size: 1rem;
      transition: all 0.3s ease;
      z-index: 2;
      backdrop-filter: blur(10px);
    }

    .favorite-btn:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: scale(1.1);
    }

    .favorite-btn.active {
      color: #ffd700;
      background: rgba(255, 215, 0, 0.2);
    }

    .favorite-btn.active:hover {
      background: rgba(255, 215, 0, 0.3);
    }

    /* ===== ‚ö° Footer ===== */
    footer {
      text-align: center;
      font-size: 0.85rem;
      color: #fff;
      padding: 25px 0;
      background: rgba(0, 0, 0, 0.6);
      position: relative;
      z-index: 1;
      text-shadow: 0 1px 3px rgba(0,0,0,0.5);
    }

    /* ===== üîä Audio Controls ===== */
    .audio-controls {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 1000;
    }

    .audio-toggle {
      background: rgba(125, 95, 255, 0.9);
      color: white;
      border: none;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      cursor: pointer;
      font-size: 1.2rem;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
      border: 2px solid rgba(255, 255, 255, 0.3);
    }

    .audio-toggle:hover {
      background: rgba(125, 95, 255, 1);
      transform: scale(1.1);
      box-shadow: 0 6px 20px rgba(125, 95, 255, 0.6);
    }

    /* ===== üì± Mobile Responsive ===== */
    @media (max-width: 768px) {
      .book-grid {
        grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
        gap: 15px;
        padding: 0 15px;
      }
      
      .category-header {
        font-size: 1.3rem;
      }
      
      header h1 {
        font-size: 1.5rem;
      }
      
      .audio-toggle {
        width: 45px;
        height: 45px;
        bottom: 15px;
        right: 15px;
      }
      
      .favorite-btn {
        width: 32px;
        height: 32px;
        font-size: 0.9rem;
      }
    }

    @media (max-width: 480px) {
      .book-grid {
        grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
        gap: 12px;
        padding: 0 10px;
      }
      
      .book img {
        height: 180px;
      }
      
      .book-title {
        font-size: 0.9rem;
      }
      
      .book-author {
        font-size: 0.8rem;
      }
    }

    /* = Fix for iOS Safari video playback */
    .video-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -2;
      overflow: hidden;
    }

    /* ===== È°µÈù¢Âä†ËΩΩÂä®Áîª ===== */
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .category {
      animation: fadeInUp 0.6s ease-out;
    }

    .book {
      animation: fadeInUp 0.8s ease-out;
    }
    /* üî• Fireburn Title Effect */
.category-header span {
  font-size: 1.6em;
  font-weight: bold;
  color: #ffcc00;
  text-shadow:
    0 0 5px #ff6600,
    0 0 10px #ff3300,
    0 0 20px #ff0000,
    0 0 40px #ff3300;
  animation: fireBurn 1.8s infinite alternate ease-in-out;
}

/* ‚ú® Flickering fire animation */
@keyframes fireBurn {
  0% {
    text-shadow:
      0 0 6px #ff6600,
      0 0 12px #ff3300,
      0 0 25px #ff0000,
      0 0 50px #ff3300;
    color: #ffdd00;
    transform: scale(1);
  }
  50% {
    text-shadow:
      0 0 8px #ffaa00,
      0 0 16px #ff6600,
      0 0 30px #ff3300,
      0 0 60px #ff0000;
    color: #ffe066;
    transform: scale(1.02);
  }
  100% {
    text-shadow:
      0 0 4px #ff3300,
      0 0 10px #ff0000,
      0 0 20px #ff6600,
      0 0 40px #ffaa00;
    color: #ffcc33;
    transform: scale(0.98);
  }
}

/* üß± Optional: Align and space category headers */
.category-header {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 12px;
}

.category-header img {
  width: 60px;
  height: 60px;
  border-radius: 12px;
  animation: flickerImg 2s infinite ease-in-out alternate;
}

/* üî• Slight flicker on the icons too */
@keyframes flickerImg {
  0%, 100% { filter: brightness(1) drop-shadow(0 0 10px #ff6600); }
  50% { filter: brightness(1.2) drop-shadow(0 0 20px #ff0000); }
}

  </style>
</head>
<body>
  <!-- üé• Background video container -->
  <div class="video-container">
    <video id="bg-video" autoplay loop playsinline muted>
      <source src="../database/videos/Heaven fall to Lucifa.mp4" type="video/mp4">
    </video>
  </div>

  <!-- üîä Audio Controls -->
  <div class="audio-controls">
    <button id="audioToggle" class="audio-toggle">üîá</button>
  </div>

  <header>
    <h1>üìö Awv's Êô∫ÊÖß‰π¶Â∫ì</h1>
  </header>

    <!-- EQ Category -->
  <section class="category">
    <div class="category-header">
      <img src="../database/logo/icon/eqicon.gif" alt="EQ Icon">
      <span>ÊÉÖÂïÜ‰π¶Á±ç (EQ Emotion)</span>
    </div>
    <div class="book-grid" id="eqBooks"></div>
  </section>

  <!-- IQ Category -->
  <section class="category">
    <div class="category-header">
      <img src="../database/logo/icon/iqicon.gif" alt="IQ Icon">
      <span>Êô∫ÂïÜ‰π¶Á±ç (IQ Intelligence)</span>
    </div>
    <div class="book-grid" id="iqBooks"></div>
  </section>

  <!-- Philosophy Category -->
  <section class="category">
    <div class="category-header">
      <img src="../database/logo/icon/philoicon.gif" alt="Philosophy Icon">
      <span>Âì≤Â≠¶‰π¶Á±ç (Philosophy)</span>
    </div>
    <div class="book-grid" id="philosophyBooks"></div>
  </section>

  <footer>
    ¬© 2025 Awv's Books ‚Äî Êó†ÈôêÊô∫ÊÖß‰π¶Êû∂
  </footer>

  <script>
    // ‰π¶Á±çÊï∞ÊçÆ
        const eqBooks = [
      { id: "eq1", title: "‰∏∫‰ªÄ‰πàÊÉÖÂïÜÊØîÊô∫ÂïÜÊõ¥ÈáçË¶Å", author: "‰ΩúËÄÖÔºö‰∏πÂ∞ºÂ∞î¬∑ÊààÂ∞îÊõºÔºàDaniel GolemanÔºâ", cover: "../database/logo/eqlogo.gif", link: "reader4.html?category=eq&book=dev1&chapter=cover" },
      { id: "eq2", title: "„ÄäÊÄùËÄÉÔºåÂø´‰∏éÊÖ¢„Äã", author: "‰ΩúËÄÖÔºö‰∏πÂ∞ºÂ∞î¬∑Âç°Â∞ºÊõºÔºàDaniel KahnemanÔºâ", cover: "../database/logo/eqlogo.gif", link: "reader4.html?category=eq&book=dev2&chapter=cover" },
      { id: "eq3", title: "„ÄäË¢´ËÆ®ÂéåÁöÑÂãáÊ∞î„Äã", author: "‰ΩúËÄÖÔºöÂ≤∏ËßÅ‰∏ÄÈÉéÔºà„Åç„Åó„Åø „ÅÑ„Å°„Çç„ÅÜÔºâÔºå Âè§Ë¥∫Âè≤ÂÅ•Ôºà„Åì„Åå „Åµ„Åø„Åü„ÅëÔºâ", cover: "../database/logo/eqlogo.gif", link: "reader4.html?category=eq&book=dev3&chapter=cover" },
      { id: "eq4", title: "ÈùûÊö¥ÂäõÊ≤üÈÄö", author: "‰ΩúËÄÖÔºöÈ©¨Ê≠áÂ∞î¬∑Âç¢Ê£ÆÂ†°ÔºàMarshall B. RosenbergÔºâ", cover: "../database/logo/eqlogo.gif", link: "reader4.html?category=eq&book=dev4&chapter=cover" },
      { id: "eq5", title: "ÂéüÂàô", author: "‰ΩúËÄÖÔºöÁëû¬∑ËææÂà©Ê¨ßÔºàRay DalioÔºâ", cover: "../database/logo/eqlogo.gif", link: "reader4.html?category=eq&book=dev5&chapter=cover" },
      { id: "eq6", title: "Ëõ§ËüÜÂÖàÁîüÂéªÁúãÂøÉÁêÜÂåªÁîü", author: "‰ΩúËÄÖÔºöÁΩó‰ºØÁâπ¬∑Êà¥ÂçöÂæ∑ÔºàRobert DebordeÔºâ", cover: "../database/logo/eqlogo.gif", link: "reader4.html?category=eq&book=dev6&chapter=cover" },
      { id: "eq7", title: "‰πüËÆ∏‰Ω†ËØ•Êâæ‰∏™‰∫∫ËÅäËÅä", author: "‰ΩúËÄÖÔºöÊ¥õËéâ¬∑ÊààÁâπÂà©Â∏ÉÔºàLori GottliebÔºâ", cover: "../database/logo/eqlogo.gif", link: "reader4.html?category=eq&book=dev7&chapter=cover" },
      { id: "eq8", title: "ÂéüÂ≠ê‰π†ÊÉØ", author: "‰ΩúËÄÖÔºöË©πÂßÜÊñØ¬∑ÂÖãÂà©Â∞îÔºàJames ClearÔºâ", cover: "../database/logo/eqlogo.gif", link: "reader4.html?category=eq&book=dev8&chapter=cover" },
      { id: "eq9", title: "ÂøÉÊÄÅÂÜ≥ÂÆöÂëΩËøê", author: "‰ΩúËÄÖÔºöÂç°ÁΩóÂ∞î¬∑Âæ∑Èü¶ÂÖãÔºàCarol S. DweckÔºâ", cover: "../database/logo/eqlogo.gif", link: "reader4.html?category=eq&book=dev9&chapter=cover" },
      { id: "eq10", title: "Ëî°Â∫∑Ê∞∏ÁöÑÊÉÖÂïÜËØæÔºö‰∏∫‰Ω†Ëá™Â∑±Ê¥ª‰∏ÄÊ¨°", author: "‰ΩúËÄÖÔºöËî°Â∫∑Ê∞∏ÔºàKevin TsaiÔºâ", cover: "../database/logo/eqlogo.gif", link: "reader4.html?category=eq&book=dev10&chapter=cover" },
      { id: "eq11", title: "ÂÜÖÂú®Ëá™‰ø°", author: "‰ΩúËÄÖÔºöÂìàÂæ∑ËâØ¬∑‰ªÄÂ∞îÔºàHadrian ScherzÔºâ„ÄÅËãè¬∑ÂìàÂæ∑ËâØÔºàSue HadrianÔºâ", cover: "../database/logo/eqlogo.gif", link: "reader4.html?category=eq&book=dev11&chapter=cover" },
      { id: "eq12", title: "ÊàëÂèØËÉΩÈîô‰∫ÜÔºöÊ£ÆÊûóÊô∫ËÄÖÁöÑÊúÄÂêé‰∏ÄÂ†Ç‰∫∫ÁîüËØæ", author: "‰ΩúËÄÖÔºöÊØîÁ∫¶ÊÅ©¬∑Á∫≥ÊèêÁßë¬∑ÊûóÂ§öÂ§´ÔºàBjorn Natiko LindofÔºâ", cover: "../database/logo/eqlogo.gif", link: "reader4.html?category=eq&book=dev12&chapter=cover" }
];
    const iqBooks = [
      { id: "iq1", title: "ÊÄùÁª¥ÁöÑËâ∫ÊúØ", author: "ÈòøÂõæ¬∑ËàíÂ∞îÊõº", cover: "../database/logo/iqlogo.gif", link: "reader4.html?category=iq&book=dev1&chapter=cover" },
      { id: "iq2", title: "ÈÄªËæëÁöÑÂäõÈáè", author: "Âç°Â∞î¬∑Ê≥¢ÊôÆÂ∞î", cover: "../database/logo/iqlogo.gif", link: "reader4.html?category=iq&book=dev2&chapter=cover" },
      { id: "iq3", title: "ÊÄùËÄÉÂø´‰∏éÊÖ¢", author: "‰∏πÂ∞ºÂ∞î¬∑Âç°Â∞ºÊõº", cover: "../database/logo/iqlogo.gif", link: "reader4.html?category=iq&book=dev3&chapter=cover" },
      { id: "iq4", title: "Â¶Ç‰ΩïÊúâÊïàÂ≠¶‰π†", author: "ÊñØÁßëÁâπ¬∑Êù®", cover: "../database/logo/iqlogo.gif", link: "reader4.html?category=iq&book=dev4&chapter=cover" },
      { id: "iq5", title: "ÊÄùÁª¥ÂØºÂõæÈù©ÂëΩ", author: "ÊâòÂ∞º¬∑ÂçöËµû", cover: "../database/logo/iqlogo.gif", link: "reader4.html?category=iq&book=dev5&chapter=cover" },
      { id: "iq6", title: "ÊâπÂà§ÊÄßÊÄùÁª¥", author: "ÁêÜÊü•Âæ∑¬∑‰øùÁΩó", cover: "../database/logo/iqlogo.gif", link: "reader4.html?category=iq&book=dev6&chapter=cover" },
      { id: "iq7", title: "ËÅ™ÊòéÁöÑÊäïËµÑËÄÖ", author: "Êú¨Êù∞Êòé¬∑Ê†ºÈõ∑ÂéÑÂßÜ", cover: "../database/logo/iqlogo.gif", link: "reader4.html?category=iq&book=dev7&chapter=cover" },
      { id: "iq8", title: "ÊàòÁï•ÊÄùÁª¥", author: "ÈòøÁª¥Á∫≥‰ªÄ¬∑Ëø™ÂÖãË•øÁâπ", cover: "../database/logo/iqlogo.gif", link: "reader4.html?category=iq&book=dev8&chapter=cover" },
      { id: "iq9", title: "Êï∞Â≠¶ÊÄùÁª¥‰πãÁæé", author: "‰πî‰∏π¬∑Ëâæ‰º¶‰ºØÊ†º", cover: "../database/logo/iqlogo.gif", link: "reader4.html?category=iq&book=dev9&chapter=cover" },
      { id: "iq10", title: "ÂàõÊñ∞ËÄÖÁöÑÁ™òÂ¢É", author: "ÂÖãËé±È°ø¬∑ÂÖãÈáåÊñØÂù¶Ê£Æ", cover: "../database/logo/iqlogo.gif", link: "reader4.html?category=iq&book=dev10&chapter=cover" },
      { id: "iq11", title: "ÂÉèÊï∞Â≠¶ÂÆ∂‰∏ÄÊ†∑ÊÄùËÄÉ", author: "Ëä≠Ëä≠Êãâ¬∑Â••ÂÖãÂà©", cover: "../database/logo/iqlogo.gif", link: "reader4.html?category=iq&book=dev11&chapter=cover" },
      { id: "iq12", title: "Â§çÊùÇÊÄùÁª¥", author: "Ê¢ÖÊãâÂ¶Æ¬∑Á±≥ÂàáÂ∞î", cover: "../database/logo/iqlogo.gif", link: "reader4.html?category=iq&book=dev12&chapter=cover" }
    ];

    const philosophyBooks = [
      { id: "philo1", title: "„ÄäÈÅìÂæ∑Áªè„Äã", author: "ËÄÅÂ≠ê", cover: "../database/logo/philologo.gif", link: "reader4.html?category=philosophy&book=dev1&chapter=cover" },
      { id: "philo2", title: "„ÄäËÆ∫ËØ≠„Äã", author: "Â≠îÂ≠ê", cover: "../database/logo/philologo.gif", link: "reader4.html?category=philosophy&book=dev2&chapter=cover" },
      { id: "philo3", title: "„ÄäÂ≠ôÂ≠êÂÖµÊ≥ï„Äã", author: "Â≠ôÊ≠¶", cover: "../database/logo/philologo.gif", link: "reader4.html?category=philosophy&book=dev3&chapter=cover" },
      { id: "philo4", title: "üïâÔ∏è„ÄäËñÑ‰ºΩÊ¢µÊ≠å„Äã", author: " ÊØóËÄ∂Â®ë", cover: "../database/logo/philologo.gif", link: "reader4.html?category=philosophy&book=dev4&chapter=cover" },
      { id: "philo5", title: "„ÄäÊ≤âÊÄùÂΩï„Äã", author: "È©¨ÂèØ¬∑Â••ÂãíÁïô", cover: "../database/logo/philologo.gif", link: "reader4.html?category=philosophy&book=dev5&chapter=cover" },
      { id: "philo6", title: "„ÄäÈöèÁ¨îÈõÜ„Äã", author: "Á±≥Ê≠áÂ∞î¬∑Âæ∑¬∑ËíôÁî∞", cover: "../database/logo/philologo.gif", link: "reader4.html?category=philosophy&book=dev6&chapter=cover" },
      { id: "philo7", title: "„ÄäÈöèÁ¨îÈõÜ„Äã", author: " Á±≥Ê≠áÂ∞î¬∑Âæ∑¬∑ËíôÁî∞", cover: "../database/logo/philologo.gif", link: "reader4.html?category=philosophy&book=dev7&chapter=cover" },
      { id: "philo8", title: "ËÆ∫ËØ≠", author: "Â≠îÂ≠ê", cover: "../database/logo/philologo.gif", link: "reader4.html?category=philosophy&book=dev8&chapter=cover" },
      { id: "philo9", title: "Á∫ØÁ≤πÁêÜÊÄßÊâπÂà§", author: "Â∫∑Âæ∑", cover: "../database/logo/philologo.gif", link: "reader4.html?category=philosophy&book=dev9&chapter=cover" },
      { id: "philo10", title: "‰º¶ÁêÜÂ≠¶", author: "ÊñØÂÆæËØ∫Ëéé", cover: "../database/logo/philologo.gif", link: "reader4.html?category=philosophy&book=dev10&chapter=cover" },
      { id: "philo11", title: "ËÆ∫Ëá™Áî±", author: "Á∫¶Áø∞¬∑ÂØÜÂ∞î", cover: "../database/logo/philologo.gif", link: "reader4.html?category=philosophy&book=dev11&chapter=cover" },
      { id: "philo12", title: "Â≠òÂú®‰∏ª‰πâÊòØ‰∏ÄÁßç‰∫∫ÈÅì‰∏ª‰πâ", author: "ËÆ©-‰øùÁΩó¬∑Ëê®Áâπ", cover: "../database/logo/philologo.gif", link: "reader4.html?category=philosophy&book=dev12&chapter=cover" }
    ];

    // ËßÜÈ¢ëÂíåÈü≥È¢ëÊéßÂà∂
    const video = document.getElementById('bg-video');
    const audioToggle = document.getElementById('audioToggle');
    let audioEnabled = false;

    // ÂàùÂßãÂåñËßÜÈ¢ëÊí≠Êîæ
    function initVideo() {
      video.muted = true;
      video.play().catch(err => {
        console.log("ËßÜÈ¢ëËá™Âä®Êí≠ÊîæË¢´ÈòªÊ≠¢:", err);
      });
    }

    // Èü≥È¢ëÂàáÊç¢ÂäüËÉΩ
    audioToggle.addEventListener('click', () => {
      audioEnabled = !audioEnabled;
      video.muted = !audioEnabled;
      audioToggle.textContent = audioEnabled ? "üîä" : "üîá";
      
      if (audioEnabled) {
        video.play().catch(err => {
          console.log("Èü≥È¢ëÊí≠ÊîæË¢´ÈòªÊ≠¢:", err);
          alert("ËØ∑ÁÇπÂáªÈ°µÈù¢‰ªªÊÑè‰ΩçÁΩÆÂêØÁî®Èü≥È¢ëÊí≠Êîæ");
        });
      }
    });

    // Áî®Êà∑‰∫§‰∫íÂêéÂêØÁî®Èü≥È¢ë
    document.addEventListener('click', () => {
      if (!audioEnabled) return;
      video.play().catch(err => {
        console.log("Èü≥È¢ëÊí≠ÊîæÈîôËØØ:", err);
      });
    }, { once: false });

    // Êî∂ËóèÂäüËÉΩ
    function getFavorites() {
      return JSON.parse(localStorage.getItem('bookFavorites') || '[]');
    }

    function saveFavorites(favorites) {
      localStorage.setItem('bookFavorites', JSON.stringify(favorites));
    }

    function toggleFavorite(bookId, bookData) {
      const favorites = getFavorites();
      const existingIndex = favorites.findIndex(fav => fav.id === bookId);
      
      if (existingIndex > -1) {
        // ÂèñÊ∂àÊî∂Ëóè
        favorites.splice(existingIndex, 1);
        saveFavorites(favorites);
        return false;
      } else {
        // Ê∑ªÂä†Êî∂Ëóè
        favorites.push({
          id: bookId,
          title: bookData.title,
          author: bookData.author,
          cover: bookData.cover,
          link: bookData.link,
          category: bookData.category,
          timestamp: new Date().toISOString()
        });
        saveFavorites(favorites);
        return true;
      }
    }

    function isFavorite(bookId) {
      const favorites = getFavorites();
      return favorites.some(fav => fav.id === bookId);
    }

    // ÂàõÂª∫Êî∂ËóèÊåâÈíÆ
    function createFavoriteButton(bookId, bookData) {
      const button = document.createElement('button');
      button.className = `favorite-btn ${isFavorite(bookId) ? 'active' : ''}`;
      button.innerHTML = isFavorite(bookId) ? '<i class="fas fa-star"></i>' : '<i class="far fa-star"></i>';
      
      button.addEventListener('click', (e) => {
        e.preventDefault();
        e.stopPropagation();
        
        const isNowFavorite = toggleFavorite(bookId, bookData);
        button.classList.toggle('active', isNowFavorite);
        button.innerHTML = isNowFavorite ? '<i class="fas fa-star"></i>' : '<i class="far fa-star"></i>';
        
        // ÊòæÁ§∫Êî∂ËóèÁä∂ÊÄÅÊèêÁ§∫
        showFavoriteNotification(bookData.title, isNowFavorite);
      });
      
      return button;
    }

    // ÊòæÁ§∫Êî∂ËóèÁä∂ÊÄÅÊèêÁ§∫
    function showFavoriteNotification(bookTitle, isFavorite) {
      const notification = document.createElement('div');
      notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: ${isFavorite ? 'rgba(34, 197, 94, 0.9)' : 'rgba(239, 68, 68, 0.9)'};
        color: white;
        padding: 12px 20px;
        border-radius: 8px;
        z-index: 10000;
        font-weight: 500;
        box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        backdrop-filter: blur(10px);
        animation: slideIn 0.3s ease-out;
      `;
      
      notification.textContent = isFavorite 
        ? `‚≠ê Â∑≤Êî∂Ëóè "${bookTitle}"` 
        : `üóëÔ∏è Â∑≤ÂèñÊ∂àÊî∂Ëóè "${bookTitle}"`;
      
      document.body.appendChild(notification);
      
      setTimeout(() => {
        notification.style.animation = 'slideOut 0.3s ease-in forwards';
        setTimeout(() => {
          if (notification.parentNode) {
            notification.parentNode.removeChild(notification);
          }
        }, 300);
      }, 2000);
    }

    // ÊòæÁ§∫‰π¶Á±çÂáΩÊï∞
    function displayBooks(bookArray, containerId, category) {
      const container = document.getElementById(containerId);
      if (!container) return;
      container.innerHTML = "";

      bookArray.forEach(book => {
        const a = document.createElement("a");
        a.href = book.link;
        a.className = "book";

        const img = document.createElement("img");
        img.src = book.cover;
        img.alt = book.title;
        img.loading = "lazy";

        const info = document.createElement("div");
        info.className = "book-info";

        const title = document.createElement("div");
        title.className = "book-title";
        title.textContent = book.title;

        const author = document.createElement("div");
        author.className = "book-author";
        author.textContent = book.author;

        // Ê∑ªÂä†Êî∂ËóèÊåâÈíÆ
        const favoriteBtn = createFavoriteButton(book.id, {
          ...book,
          category: category
        });

        info.appendChild(title);
        info.appendChild(author);
        a.appendChild(img);
        a.appendChild(favoriteBtn); // Ê∑ªÂä†Êî∂ËóèÊåâÈíÆ
        a.appendChild(info);
        container.appendChild(a);
      });
    }

    // È°µÈù¢Âä†ËΩΩÂÆåÊàêÂêéÂàùÂßãÂåñ
    window.addEventListener('load', () => {
      initVideo();
      displayBooks(iqBooks, "iqBooks", "iq");
      displayBooks(eqBooks, "eqBooks", "eq");
      displayBooks(philosophyBooks, "philosophyBooks", "philosophy");
    });

    // Â§ÑÁêÜÈ°µÈù¢ÂèØËßÅÊÄßÂèòÂåñ
    document.addEventListener('visibilitychange', () => {
      if (document.hidden) {
        video.pause();
      } else {
        video.play().catch(err => console.log("ÊÅ¢Â§çÊí≠ÊîæÂ§±Ë¥•:", err));
      }
    });

    // Ê∑ªÂä†Âä®ÁîªÊ†∑Âºè
    const style = document.createElement('style');
    style.textContent = `
      @keyframes slideIn {
        from {
          transform: translateX(100%);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }
      
      @keyframes slideOut {
        from {
          transform: translateX(0);
          opacity: 1;
        }
        to {
          transform: translateX(100%);
          opacity: 0;
        }
      }
    `;
    document.head.appendChild(style);
  </script>
</body>
</html>

